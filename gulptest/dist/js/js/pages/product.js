"use strict";function Head(){this.head=$("#HEAD"),this.foot=$("#FOOT"),this.fixnav=$("#FIXNAV")}function Adddata(){this.box=$("#box")}$.extend(Head.prototype,{init:function(){this.createDom()},createDom:function(){this.element=new CreHeader(this.head),this.element=new CreFooter(this.foot),this.element=new Crefixnav(this.fixnav)}}),(new Head).init(),$.extend(Adddata.prototype,{init:function(){$.ajax({type:"get",url:"http://localhost/work/yigu/src/php/select.php",dataType:"json",success:$.proxy(this.updatedata,this)})},updatedata:function(c){var i=c.length;layui.use("laypage",function(){layui.laypage.render({elem:"btnList",count:i,limit:6,groups:3,prev:"上一页",next:"下一页",jump:function(t){for(var a="",e=(t.curr-1)*t.limit;e<Math.min(i,t.limit*t.curr);e++)a+='<li  class="shmove" data-id="'+c[e].did+'">\n\t\t\t\t\t\t\t<img src="'+c[e].img+"?"+c[e].did+'" class="img" alt="">\n\t\t\t\t\t\t\t<div class="pro_text">\n\t\t\t\t\t\t\t<h3 class="img">'+c[e].title+'</h3>\n\t\t\t\t\t\t\t<p><span class="fl">￥'+c[e].mprice+'</span><span class="fr">￥'+c[e].price+'</span></p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<span id="addshop"><em class="img" data-id="'+c[e].did+'">加入购物车</em></span>\n\t\t\t\t\t</li>';$("#box").html(a)}})});var p={},h={};this.box.click(function(t){var a=(t=t||event).target||t.srcElement;if("IMG"==a.tagName&&"img"==a.className)for(var e=a.src.split("?")[1].split("=")[1],i=0;i<c.length;i++)if(e==c[i].id){var n=$(a).parent().attr("data-id"),s=h[n];s||(s=1,h[n]=s);var r=JSON.stringify(h);localStorage.setItem("buy_data",r),location.href="details.html";break}if(console.log(a),"EM"==a.tagName){var o=$(a).attr("data-id");console.log(o);var l=p[o];l?l++:l=1,p[o]=l;var d=JSON.stringify(p);localStorage.setItem("shop",d)}})}}),(new Adddata).init();
"use strict";var cw=document.body.clientWidth,ch=document.body.clientHeight,bgbox=$("#bg");function Register(){this.form=$("#form"),this.tel=$("#tel"),this.pwd=$("#pwd"),this.repwd=$("#repwd"),this.code=$("#code"),this.codes=$("#codes"),this.regbtn=$("#regbtn")}bgbox.css({width:cw,height:ch}),$.extend(Register.prototype,{init:function(){this.codes.html(randomCode(6)),this.inspection(),this.regbtnclick(),this.codes.on("click",$.proxy(this.acode,this))},acode:function(){this.codes.html(randomCode(6))},inspection:function(){this.form.on("click",$.proxy(this.formins,this))},formins:function(t){var s=this,i=t.target||t.srcElement;"INPUT"==i.tagName&&"tel"==i.id&&$(i).blur(function(){reg.tel.test($(this).val())?($(this).next().css({display:"block",color:"green"}),$(this).next().html("√号码可用")):($(this).next().css({display:"block",color:"red"}),$(this).next().html("×号码格式不正确"))}),"INPUT"==i.tagName&&"pwd"==i.id&&$(i).blur(function(){reg.password.test($(this).val())?($(this).next().html("√密码格式正确"),$(this).next().css({color:"green",display:"block"})):($(this).next().html("×密码格式不证确，密码由6-20位数字、字母、下划线组成"),$(this).next().css({color:"red",display:"block"}))}),"INPUT"==i.tagName&&"repwd"==i.id&&$(i).blur(function(){$(this).val()==s.pwd.val()?($(this).next().html("√密码输入正确"),$(this).next().css({color:"green",display:"block"})):($(this).next().html("×密码不一致"),$(this).next().css({color:"red",display:"block"}))}),"INPUT"==i.tagName&&"code"==i.id&&$(i).blur(function(){$(this).val()==s.codes.html()?($(this).next().next().html("√验证码输入正确"),$(this).next().next().css({color:"green",display:"block"})):($(this).next().next().html("×验证码输入错误,区分大小写"),$(this).next().next().css({color:"red",display:"block"}))})},regbtnclick:function(){this.regbtn.on("click",$.proxy(this.ajax,this))},ajax:function(){var t=this.tel.val(),s=this.pwd.val();console.log(t,s),$.ajax({type:"post",url:"http://localhost/work/yigu/src/php/register.php",data:{tel:t,pwd:s},dataType:"json",success:$.proxy(this.info,this)})},info:function(t){console.log(t),1==t.status&&(alert("注册成功！"),location.href="login.html")}}),(new Register).init();